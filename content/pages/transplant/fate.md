title: Fate ONS移植版
slug: pages/fate
allow_comment: True

.. include :: transplant.md

首发(2009.10.10)：
[imp3](http://bbs.imp3.net/thread-667000-1-1.html)
[智器粉丝团](http://www.zhiqifans.com/thread-11574-1-1.html)

资源：
[机锋](http://bbs.gfan.com/viewthread.php?tid=327827)
[魅族](http://bbs.meizu.com/thread-1329140-1-1.html)

问题解决：
[ACGF](http://bbs.acgfuture.com/forum.php?mod=viewthread&tid=10928)

防止被HX，在自己这里留个备份……

---

## 必要的说明

1. Fate/Stay Night是TypeMoon公司出品的文字AVG游戏，民间各种版本的汉化及移植均出于对作品的喜爱和研究，请勿用于非法目的。

2. 移植自澄空汉化的fate 中文最终版（补丁版本号B）：[澄空发布页](http://bbs.sumisora.org/read.php?tid=10876535)。

    这个版本的Fate是在txle的语音包，台湾汉化组的文字脚本，逍遥客的le结局补丁的基础上整合成的，是在无数同好们共同努力下诞生的。

    向所有因为对Fate的爱而努力的前辈及同好们致敬！

3. 这个Fate是基于ONScripter-zh03制作的，是PSP移植界强人John_HE大大修改的支持gbk编码的版本，极少修改下通过Q5下的编译。onscripter是遵守GPL协议的自由软件，请在使用时务必注意。

4. 感谢link和304君的协助测试，面对0.30和0.35的各种囧bug也能耐住性子实在辛苦了= =

    感谢夜君的经验交流(夜君的PSP版Fate请参见[他的blog](http://784255292.blog.163.com/))

    感谢澄空学园TM版都谷老大对汉化授权方面的回复。

5. 适用于分辨率VGA及以上，支持SDL，可以编译onscripter的任意平台，呃，理论上是这样的，实际上从性能角度考虑可能需要关闭不少动态效果──Fate的演出效果太BT了，真的= =另外预留了更低分辨率的预算，但是不保证好使，PSP党更推荐参考夜君的作品……= =

---

## 游戏下载

感谢炮神的[分流](http://bbs.gfan.com/viewthread.php?tid=327827)！

1. [游戏本体](http://pan.baidu.com/netdisk/singlepublic?fid=807221_1660485860)
2. [游戏语音(可选)](http://pan.baidu.com/netdisk/singlepublic?fid=807221_4130406788)
3. [CG鉴赏模式补丁](http://pan.baidu.com/netdisk/singlepublic?fid=807221_1278623672)
4. [最新脚本(2012/02/10更新)](http://pan.baidu.com/netdisk/singlepublic?fid=807221_791635844)
5. [LastEpisode修正(2012/08/28更新)](http://pan.baidu.com/share/link?shareid=7669&uk=1124565063/)

请按顺序解压到同一个目录中。
模拟器请自行搜索下载最新版，推荐使用[面包工坊的版本](http://portal.bakerist.info/node/251)。
并在SD卡建立ONS的文件夹，将游戏目录复制到这里。

特别需要强调的是，遇到任何问题前，*请确保已经使用了CG鉴赏模式补丁和最新脚本*。

另外强调一点，如果你在存档后替换或修改了脚本，然后去读之前的存档，那么***什么都有可能发生***!

在 Fate 和其他游戏中曾经见到的由此引发的问题曾有：

> 读取立刻发生错误；
>
> 在存档所在的章节无限循环；
>
> 之后章节(可能在很多章节后)进入到明显无关的章节；
>
> 在读档后数十个小时后的游戏 ED 处跳出，导致无法打开与该结局有关的特典 (秽翼)；
>
> ……

所以请*一开始就替换成最新脚本，不要等遇到问题再换*！

另外，跳转章节功能和存档无关，只依赖于游戏目录下的 NScrflog.dat，即使损失了之前的存档，恢复到原先进度也是容易的。

---

## 常见问题和解决方法

1. 开头怎么一直在以远坂凛视角进行游戏？

    A: 这是序章。

2. 在 UBW 线和 Saber 在道场时， Saber 要求士郎闭眼，随后跳出。

    A: 请更新最新脚本。

3. 使用跳过已读章节功能时，部分章节跳过会自动跳出游戏，例如 Rider 与 Saber 在楼顶对决一役。

    A: 请更新最新脚本。

4. Esc 应该调出菜单，但是没有显示。

    A: 请更新脚本并打上鉴赏补丁。

5. HF 最终结局分叉的选择肢跳出。

    A: 请更新最新脚本。

6. 无法使用自动阅读模式。

    A: 请更新最新脚本。

7. 某些场景无语音。

    A: i) 语音来自 PS2 版 Fate 新星。该版是全年龄版。所以某些地方没有语音是正常的。

    ii) 如果不是“那种场景”的时候，一句话没说完就停止语音播放，请点一下 ONS 界面上那三个按钮中的 “O” .


8. 第一章第一次选择后无限循环。(常见被人叫作“十年循环”)

    A: 这是模拟器对中文支持的方式不同的问题。总之最合理的方法是更换模拟器——如果你可以选择的话。

    特别提醒，新的不见得是最好的。

    i) 如果你在使用 iOS 版本的 ONS，请更换模拟器。最早的旧版本表现良好。我正在收集报告，欢迎汇报。

    现在已知有问题的有：20111011(感谢 caspen 汇报)

    现在已知无问题的有：20110624-1(感谢 wtao99cn 汇报)

    ii) Android 只有炮神移植的最早的版本有这个问题，炮神之后移植的版本，以及现在大多数人在用的 natdon 君维护的版本都没有这个问题，所以你几乎不可能还在用有循环问题的版本了。

    iii) 如果你在使用 Symbian 版本的 ONS，应有两个版本的 ONS，一个对声音支持有问题，一个不支持 GBK——很有可能就是你在用的这个。没有特别好的办法——除了下面一段说的那个方法。

    总之，无论你使用哪个版本的模拟器，你都可以选择这样做：使用 PC 版 ONS 进行游戏跳过这段并保存，然后将存档复制过来使用。显然这样就可以跳过这段循环，之后就可以正常继续了。但我无法保证再往后不会继续出现类似的问题。

    如果你正在使用未修改过的2012年2月10日更新的 0.39f 版脚本，这是我打的[存档](http://pan.baidu.com/netdisk/singlepublic?fid=807221_2874030528)。

    三个存档都在第一页最开头，分别是循环前和两个选择后的存档。


9. 无法存档。

    A: 请检查游戏目录中是否有名为 savedata 的子目录。存档时存档文件直接保存在游戏目录下，但存档缩略图保存在 savedata 中。

    对于 iOS 用户，请注意检查权限问题。

10. 有音乐和语音，但是没有音效。

    A: 最早版本的音效是 wav 格式的，后来制作M8版的时候转换成了 ogg, 之后一直都是 ogg 格式的(如果你是从这里下的，也是 ogg 格式的)。如果你下载的资源文件和脚本中的设置不匹配就有可能造成这种后果。

    总之，请搜索并检查 90.txt 中的`stralias SND_FORMAT,".ogg"`.

---

## 完成度

1. 全剧本完成，含序章、三线剧本、PS2剧情、LastEpisode、TigerEnd，没有能力完全测试完，但目前全通人数已经很可观了。

2. 普通转场特效完成，大部分动态特效完成，有关色调的特效没有做处理。

3. 基本菜单骨架完成。CG鉴赏最早没有做，感谢白翅膀的鼓励，已经补充上了。
    EDList最早就完成了，动机不明。

    没有做界面的有config、status、weapon、music回放、movie回放、回想模式等，尽管留有接口，但时隔太久我没有信心碰它们。

---

## 一些可能有用的 tips

1. 直接打开全 CG

    A: 打开20.txt，可以查找到两处`if fchk $19 `，将查找到的这几个字符一一替换为空格即可。

    替换成空格是为了保证之前的存档可以继续使用。只要保证该文件大小不变即可。

2. 直接打开全大结局(这样就可以直接选择 HF 线，标题画面也会直接出现 Last Episode 了)

    A: 打开10.txt，其中有一行的完整内容恰为`*start`(只有一处，请善用查找功能)。在该行后添加如下一行：

        mov %200, 1:mov %201, 1:mov %202, 1:mov %203, 1:mov %204, 1:mov %205, 1:mov %206, 1

    打开游戏，退出游戏。再把10.txt改回去(以保证之前的存档可以使用)。

3. 我希望能在所有章节开始时都选择是否跳过，而不是仅对已读章节这样做。

    A: 打开 09.txt，查找：

        notif lchk $0 goto *fateroute_readscript

    替换为：

        ;otif lchk $0 goto *fateroute_readscript

    即可。

4. 这是全年龄版的还是有XX场景版的？

    A: 你的版本是否是全年龄的，在第一次游戏时就被确定并保存在`gloval.sav`文件中了(如果你下的版本是别人玩过重新打包的版本，那就视对方的`gloval.sav`文件的内容而定)。
    是否通过XX线也保存在同一个文件中，它们都是无法直接通过替换脚本来切换的。

    如果你用的最新补丁，是有XX场景版的，这个意思是说，如果你在游戏目录中没有`gloval.sav`时直接使用最新脚本开始第一次游戏，那么它将是有XX场景版的。

    切换全年龄/XX场景版的方法如下：

    在 10.txt 中的*单独一行*内容为`*title`(只有一处，请善用查找功能)的后头添加一行：

        mov %SF_HEXIE, 1

    即为切换到全年龄模式。如果后头是 0 ，则是切换到有XX场景模式。

    这是一次运行永久有效的。因此你可以修改为全年龄后打开游戏(准确地说，是看到标题画面后)再正常退出，然后把添加的这一行删掉(如果仔细看过一楼，你会明白为什么要保持脚本没有变化)，以后打开仍然是全年龄的。

    另外，如果你的存档是在快要进入XX场景的地方存的，就算开头改为全年龄，读取该存档仍然会进入XX场景，因为每个场景都是一个很大的段落。故请确保要读的存档存储在进入该段落之前。
